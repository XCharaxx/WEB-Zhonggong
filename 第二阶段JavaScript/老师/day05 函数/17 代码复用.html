<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <p>
        商品名：iphone12<br>
        价格：<span id="price">99.99元</span><br>
        数量：<input type="number" value="0" id="count" style='width:50px'><br>
        小计：<span id="sum">0元</span>
    </p>
    <p>
        商品名：iphone12<br>
        价格：<span id="price">99.99元</span><br>
        数量：<input type="number" value="0" id="count" style='width:50px'><br>
        小计：<span id="sum">0元</span>
    </p>
    <p>
        商品名：iphone12<br>
        价格：<span id="price">99.99元</span><br>
        数量：<input type="number" value="0" id="count" style='width:50px'><br>
        小计：<span id="sum">0元</span>
    </p>
    <p>
        商品名：iphone12<br>
        价格：<span id="price">99.99元</span><br>
        数量：<input type="number" value="0" id="count" style='width:50px'><br>
        小计：<span id="sum">0元</span>
    </p>
    <p>
        商品名：iphone12<br>
        价格：<span id="price">99.99元</span><br>
        数量：<input type="number" value="0" id="count" style='width:50px'><br>
        小计：<span id="sum">0元</span>
    </p>
    <p>
        商品名：iphone12<br>
        价格：<span id="price">99.99元</span><br>
        数量：<input type="number" value="0" id="count" style='width:50px'><br>
        小计：<span id="sum">0元</span>
    </p>
    <script>

        /* 
        如果功能一个，结构一致，代码复用
        1.先实现一个，里面的元素都需要通过父元素获取
        2.把主要代码放入函数中，把父元素作为参数
        
        */
        var oP = document.getElementsByTagName("p");
        car(oP[0])
        car(oP[1])
        car(oP[2])

        function car(parent) {
            //1.获取元素
            var oPrice = parent.getElementsByTagName("span")[0]
            var oCount = parent.getElementsByTagName("input")[0]
            var oSum = parent.getElementsByTagName("span")[1]

            //2.点击input，计算小计 = 价格*数量
            oCount.onclick = function () {
                oSum.innerText = (parseFloat(oPrice.innerText) * Number(oCount.value)).toFixed(2) + "元";
            }
        }

    </script>
</body>

</html>